(()=>{"use strict";var e={1453:(e,n,t)=>{t(3792),t(3362),t(9085),t(9391);var r=t(3751),a=t(641),u={id:"app",class:"torii-gate"},s={class:"shrine-menu"},i={class:"shrine-content"};function o(e,n,t,r,o,l){var c=(0,a.g2)("router-link"),d=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("header",{onClick:n[0]||(n[0]=function(){return r.goToHome&&r.goToHome.apply(r,arguments)}),style:{cursor:"pointer"}},n[2]||(n[2]=[(0,a.Lk)("div",{class:"logo"},"⛩️",-1),(0,a.Lk)("h1",null,"線上點光明燈平台",-1)])),(0,a.Lk)("nav",s,[(0,a.bF)(c,{to:"/",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[3]||(n[3]=[(0,a.eW)("首頁")])})),_:1}),r.isLoggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(c,{key:0,to:"/login",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[4]||(n[4]=[(0,a.eW)("登入")])})),_:1})),r.isLoggedIn?((0,a.uX)(),(0,a.Wv)(c,{key:1,to:"/profile",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[5]||(n[5]=[(0,a.eW)("會員資料")])})),_:1})):(0,a.Q3)("",!0),(0,a.bF)(c,{to:"/lanterns",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[6]||(n[6]=[(0,a.eW)("光明燈")])})),_:1}),(0,a.bF)(c,{to:"/lantern-status",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[7]||(n[7]=[(0,a.eW)("光明燈狀態")])})),_:1}),r.isAdmin?((0,a.uX)(),(0,a.Wv)(c,{key:2,to:"/admin",class:"shrine-menu-item"},{default:(0,a.k6)((function(){return n[8]||(n[8]=[(0,a.eW)("管理後台")])})),_:1})):(0,a.Q3)("",!0),r.isLoggedIn?((0,a.uX)(),(0,a.CE)("a",{key:3,onClick:n[1]||(n[1]=function(){return r.logout&&r.logout.apply(r,arguments)}),class:"shrine-menu-item",style:{cursor:"pointer"}},"登出")):(0,a.Q3)("",!0)]),(0,a.Lk)("main",i,[(0,a.bF)(d)]),n[9]||(n[9]=(0,a.Lk)("footer",{class:"shrine-footer"},[(0,a.Lk)("p",null,"© 2023 線上點光明燈平台")],-1))])}t(4114);var l=t(6278),c=t(5220);const d={setup:function(){var e=(0,l.Pj)(),n=(0,c.rd)(),t=(0,a.EW)((function(){return e.state.user&&e.state.user.isAdmin})),r=(0,a.EW)((function(){return!!e.state.user})),u=function(){n.push("/")},s=function(){e.dispatch("logout"),n.push("/login")};return{isAdmin:t,isLoggedIn:r,goToHome:u,logout:s}}};var p=t(6262);const m=(0,p.A)(d,[["render",o]]),v=m;t(5086),t(6099);var f={class:"home"};function k(e,n,t,r,u,s){return(0,a.uX)(),(0,a.CE)("div",f,[n[1]||(n[1]=(0,a.Lk)("h2",null,"歡迎來到線上點光明燈平台",-1)),n[2]||(n[2]=(0,a.Lk)("div",{class:"lantern-animation"}," 🏮🏮🏮 ",-1)),n[3]||(n[3]=(0,a.Lk)("p",{class:"welcome-text"},"在這裡，您可以為自己和親愛的人點亮祈福的光明燈",-1)),(0,a.Lk)("button",{onClick:n[0]||(n[0]=function(){return r.startPraying&&r.startPraying.apply(r,arguments)}),class:"start-praying-btn"},"開始祈福")])}const L={name:"Home",setup:function(){var e=(0,l.Pj)(),n=(0,c.rd)(),t=function(){e.getters.isLoggedIn?n.push("/lanterns"):n.push("/login")};return{startPraying:t}}},h=(0,p.A)(L,[["render",k],["__scopeId","data-v-708856cd"]]),g=h;var y=t(33),A={class:"login"},w={class:"form-group"},b={class:"form-group"},C={key:0,class:"error-message"},x={class:"links"};function _(e,n,t,u,s,i){var o=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",A,[n[8]||(n[8]=(0,a.Lk)("h2",null,"登入",-1)),(0,a.Lk)("form",{onSubmit:n[2]||(n[2]=(0,r.D$)((function(){return u.login&&u.login.apply(u,arguments)}),["prevent"])),class:"login-form"},[(0,a.Lk)("div",w,[n[3]||(n[3]=(0,a.Lk)("label",{for:"email"},"用戶名：",-1)),(0,a.bo)((0,a.Lk)("input",{id:"email","onUpdate:modelValue":n[0]||(n[0]=function(e){return u.email=e}),type:"text",required:""},null,512),[[r.Jo,u.email]])]),(0,a.Lk)("div",b,[n[4]||(n[4]=(0,a.Lk)("label",{for:"password"},"密碼：",-1)),(0,a.bo)((0,a.Lk)("input",{id:"password","onUpdate:modelValue":n[1]||(n[1]=function(e){return u.password=e}),type:"password",required:""},null,512),[[r.Jo,u.password]])]),n[5]||(n[5]=(0,a.Lk)("button",{type:"submit"},"登入",-1))],32),u.error?((0,a.uX)(),(0,a.CE)("p",C,(0,y.v_)(u.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",x,[(0,a.bF)(o,{to:"/register"},{default:(0,a.k6)((function(){return n[6]||(n[6]=[(0,a.eW)("註冊新帳號")])})),_:1}),(0,a.bF)(o,{to:"/forgot-password"},{default:(0,a.k6)((function(){return n[7]||(n[7]=[(0,a.eW)("忘記密碼")])})),_:1})])])}var P=t(4048),E=t(388),X=t(953);const I={setup:function(){var e=(0,X.KR)(""),n=(0,X.KR)(""),t=(0,X.KR)(""),r=(0,c.rd)(),a=(0,l.Pj)(),u=function(){var u=(0,E.A)((0,P.A)().mark((function u(){var s;return(0,P.A)().wrap((function(u){while(1)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,a.dispatch("login",{email:e.value,password:n.value});case 3:s=u.sent,s.isAdmin?r.push("/admin"):r.push("/"),u.next=11;break;case 7:u.prev=7,u.t0=u["catch"](0),t.value="登入失敗，請檢查您的用戶名和密碼",console.error("登入失敗",u.t0);case 11:case"end":return u.stop()}}),u,null,[[0,7]])})));return function(){return u.apply(this,arguments)}}();return{email:e,password:n,error:t,login:u}}},S=(0,p.A)(I,[["render",_],["__scopeId","data-v-da429294"]]),U=S;var W={class:"register"};function F(e,n,t,u,s,i){var o=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",W,[n[6]||(n[6]=(0,a.Lk)("h2",null,"註冊新帳號",-1)),(0,a.Lk)("form",{onSubmit:n[3]||(n[3]=(0,r.D$)((function(){return u.register&&u.register.apply(u,arguments)}),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=function(e){return u.email=e}),type:"email",placeholder:"電子郵件",required:""},null,512),[[r.Jo,u.email]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[1]||(n[1]=function(e){return u.password=e}),type:"password",placeholder:"密碼",required:""},null,512),[[r.Jo,u.password]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return u.confirmPassword=e}),type:"password",placeholder:"確認密碼",required:""},null,512),[[r.Jo,u.confirmPassword]]),n[4]||(n[4]=(0,a.Lk)("button",{type:"submit"},"註冊",-1))],32),(0,a.bF)(o,{to:"/login"},{default:(0,a.k6)((function(){return n[5]||(n[5]=[(0,a.eW)("已有帳號？登入")])})),_:1})])}const K={setup:function(){var e=(0,X.KR)(""),n=(0,X.KR)(""),t=(0,X.KR)(""),r=(0,c.rd)(),a=(0,l.Pj)(),u=function(){var u=(0,E.A)((0,P.A)().mark((function u(){return(0,P.A)().wrap((function(u){while(1)switch(u.prev=u.next){case 0:if(n.value===t.value){u.next=3;break}return alert("密碼不匹配"),u.abrupt("return");case 3:return u.prev=3,u.next=6,a.dispatch("register",{email:e.value,password:n.value});case 6:r.push("/login"),u.next=12;break;case 9:u.prev=9,u.t0=u["catch"](3),console.error("註冊失敗",u.t0);case 12:case"end":return u.stop()}}),u,null,[[3,9]])})));return function(){return u.apply(this,arguments)}}();return{email:e,password:n,confirmPassword:t,register:u}}},R=(0,p.A)(K,[["render",F]]),V=R;var q={class:"forgot-password"};function j(e,n,t,u,s,i){var o=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",q,[n[4]||(n[4]=(0,a.Lk)("h2",null,"忘記密碼",-1)),(0,a.Lk)("form",{onSubmit:n[1]||(n[1]=(0,r.D$)((function(){return u.resetPassword&&u.resetPassword.apply(u,arguments)}),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=function(e){return u.email=e}),type:"email",placeholder:"電子郵件",required:""},null,512),[[r.Jo,u.email]]),n[2]||(n[2]=(0,a.Lk)("button",{type:"submit"},"重設密碼",-1))],32),(0,a.bF)(o,{to:"/login"},{default:(0,a.k6)((function(){return n[3]||(n[3]=[(0,a.eW)("返回登入")])})),_:1})])}const D={setup:function(){var e=(0,X.KR)(""),n=(0,c.rd)(),t=function(){var t=(0,E.A)((0,P.A)().mark((function t(){return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:alert("密碼重設連結已發送到 ".concat(e.value)),n.push("/login");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{email:e,resetPassword:t}}},J=(0,p.A)(D,[["render",j]]),O=J;t(2675),t(9463),t(2010);var M={class:"lantern-list"},$={class:"lantern-grid"},N={class:"price"},B=["onClick"];function Q(e,n,t,r,u,s){return(0,a.uX)(),(0,a.CE)("div",M,[n[1]||(n[1]=(0,a.Lk)("h2",null,"光明燈類型",-1)),(0,a.Lk)("div",$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.lanterns,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"lantern-item"},[n[0]||(n[0]=(0,a.Lk)("div",{class:"lantern-icon"},"🏮",-1)),(0,a.Lk)("h3",null,(0,y.v_)(e.name),1),(0,a.Lk)("p",null,(0,y.v_)(e.description),1),(0,a.Lk)("p",N,"價格: $"+(0,y.v_)(e.price),1),(0,a.Lk)("button",{onClick:function(n){return r.selectLantern(e)}},"選擇",8,B)])})),128))])])}var H=t(9201),T=(t(6280),t(6918),t(113),t(9089),[{id:1,name:"平安燈",description:"祈求平安順遂",price:100},{id:2,name:"智慧燈",description:"增長智慧才能",price:150},{id:3,name:"健康燈",description:"祈求身體健康",price:120},{id:4,name:"財富燈",description:"祈求財運亨通",price:200},{id:5,name:"姻緣燈",description:"祈求良緣到來",price:180},{id:6,name:"事業燈",description:"祈求事業有成",price:160},{id:7,name:"學業燈",description:"祈求學業進步",price:130},{id:8,name:"家庭燈",description:"祈求家庭和睦",price:140},{id:9,name:"長壽燈",description:"祈求長壽安康",price:170},{id:10,name:"功德燈",description:"祈求功德圓滿",price:190},{id:11,name:"消災燈",description:"祈求消災解厄",price:110},{id:12,name:"添福燈",description:"祈求福運綿長",price:130},{id:13,name:"光明燈",description:"祈求前途光明",price:150},{id:14,name:"安神燈",description:"祈求心神安寧",price:140},{id:15,name:"祈願燈",description:"實現心中願望",price:160}]),z=[{id:1,name:"平安燈",totalCount:100,litCount:3,litBy:[{name:"張三",message:"祈求全家平安"},{name:"李四",message:"願世界和平"},{name:"王五",message:"保佑身體健康"}]},{id:2,name:"智燈",totalCount:50,litCount:2,litBy:[{name:"趙六",message:"祈求學業進步"},{name:"錢七",message:"願工作順利"}]}],G=[{id:1,email:"admin",isAdmin:!0},{id:2,email:"user@example.com",isAdmin:!1}],Y=[{id:1,name:"平安燈",date:"2023-05-01",message:"祈求全家平安"},{id:2,name:"智慧燈",date:"2023-06-15",message:"祈求學業進步"}],Z={getLanterns:function(){return Promise.resolve(T)},createLantern:function(e){return Promise.resolve((0,H.A)((0,H.A)({},e),{},{id:Date.now()}))},getLanternStatus:function(){return Promise.resolve(z)},deleteLantern:function(e){return Promise.resolve({success:!0,deletedLanternId:e})},getLanternDetailById:function(e){return Promise.resolve(z.find((function(n){return n.id===e})))}},ee={login:function(e){return"admin"===e.email&&"admin"===e.password?Promise.resolve({user:{id:1,email:"admin",isAdmin:!0}}):"user"===e.email&&"user"===e.password?Promise.resolve({user:{id:2,email:"user@example.com",isAdmin:!1}}):Promise.reject(new Error("Invalid credentials"))},register:function(e){return Promise.resolve({user:(0,H.A)((0,H.A)({id:3},e),{},{isAdmin:!1})})},getUsers:function(){return Promise.resolve(G)},deleteUser:function(e){return Promise.resolve({success:!0,deletedUserId:e})},getUserLanterns:function(){return Promise.resolve(Y)}},ne={processPayment:function(e){return Promise.resolve({success:!0,orderId:Date.now(),data:e})}},te=[{id:1,user:"張三",lantern:"平安燈",message:"祈求全家平安",status:"pending"},{id:2,user:"李四",lantern:"智慧燈",message:"祈求學業進步",status:"approved"}],re={siteName:"線上點光明燈台",maxLanterns:1e3,prayerApprovalRequired:!0},ae={getPrayers:function(){return Promise.resolve(te)},updatePrayerStatus:function(e,n){return Promise.resolve({success:!0,id:e,status:n})}},ue={getSettings:function(){return Promise.resolve(re)},updateSettings:function(e){return re=(0,H.A)((0,H.A)({},re),e),Promise.resolve({success:!0})}};const se={setup:function(){var e=(0,c.rd)(),n=(0,l.Pj)(),t=(0,X.KR)([]);(0,a.sV)((0,E.A)((0,P.A)().mark((function e(){return(0,P.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getLanterns();case 2:t.value=e.sent;case 3:case"end":return e.stop()}}),e)}))));var r=function(t){n.commit("setSelectedLantern",t),e.push("/checkout")};return{lanterns:t,selectLantern:r}}},ie=(0,p.A)(se,[["render",Q],["__scopeId","data-v-1f2aa137"]]),oe=ie;var le={class:"lantern-status"},ce={key:0,class:"lantern-list"},de={key:1};function pe(e,n,t,r,u,s){var i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",le,[n[1]||(n[1]=(0,a.Lk)("h2",null,"光明燈狀態概覽",-1)),r.lanterns.length?((0,a.uX)(),(0,a.CE)("div",ce,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.lanterns,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"lantern-item"},[(0,a.Lk)("h3",null,(0,y.v_)(e.name),1),(0,a.Lk)("p",null,"已點亮: "+(0,y.v_)(e.litCount)+" / "+(0,y.v_)(e.totalCount),1),(0,a.bF)(i,{to:"/lantern-detail/".concat(e.id)},{default:(0,a.k6)((function(){return n[0]||(n[0]=[(0,a.eW)("查看詳情")])})),_:2},1032,["to"])])})),128))])):((0,a.uX)(),(0,a.CE)("p",de,"目前沒有光明燈資訊。"))])}const me={setup:function(){var e=(0,X.KR)([]);return(0,a.sV)((0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Z.getLanternStatus();case 3:e.value=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.error("獲取光明燈狀態失敗",n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),{lanterns:e}}},ve=(0,p.A)(me,[["render",pe],["__scopeId","data-v-dbe42e4e"]]),fe=ve;var ke={class:"checkout"},Le={key:0};function he(e,n,t,u,s,i){return(0,a.uX)(),(0,a.CE)("div",ke,[n[3]||(n[3]=(0,a.Lk)("h2",null,"結帳",-1)),u.selectedLantern?((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("h3",null,(0,y.v_)(u.selectedLantern.name),1),(0,a.Lk)("p",null,"價格: $"+(0,y.v_)(u.selectedLantern.price),1)])):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:n[1]||(n[1]=(0,r.D$)((function(){return u.processPayment&&u.processPayment.apply(u,arguments)}),["prevent"]))},[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":n[0]||(n[0]=function(e){return u.prayerMessage=e}),placeholder:"祈福留言"},null,512),[[r.Jo,u.prayerMessage]]),n[2]||(n[2]=(0,a.Lk)("button",{type:"submit"},"確認付款",-1))],32)])}const ge={setup:function(){var e=(0,c.rd)(),n=(0,l.Pj)(),t=(0,X.KR)(""),r=(0,a.EW)((function(){return n.state.selectedLantern})),u=function(){var n=(0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ne.processPayment({lanternId:r.value.id,amount:r.value.price,prayerMessage:t.value});case 3:e.push("/payment-success"),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.error("支付失敗",n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();return{selectedLantern:r,prayerMessage:t,processPayment:u}}},ye=(0,p.A)(ge,[["render",he]]),Ae=ye;var we={class:"admin-dashboard"};function be(e,n,t,r,u,s){var i=(0,a.g2)("router-link"),o=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",we,[n[7]||(n[7]=(0,a.Lk)("h2",null,"管理員儀表板",-1)),(0,a.Lk)("nav",null,[(0,a.bF)(i,{to:"/admin/users"},{default:(0,a.k6)((function(){return n[0]||(n[0]=[(0,a.eW)("使用者管理")])})),_:1}),n[4]||(n[4]=(0,a.eW)(" | ")),(0,a.bF)(i,{to:"/admin/lanterns"},{default:(0,a.k6)((function(){return n[1]||(n[1]=[(0,a.eW)("光明燈管理")])})),_:1}),n[5]||(n[5]=(0,a.eW)(" | ")),(0,a.bF)(i,{to:"/admin/prayers"},{default:(0,a.k6)((function(){return n[2]||(n[2]=[(0,a.eW)("祈福留言管理")])})),_:1}),n[6]||(n[6]=(0,a.eW)(" | ")),(0,a.bF)(i,{to:"/admin/settings"},{default:(0,a.k6)((function(){return n[3]||(n[3]=[(0,a.eW)("系統設置")])})),_:1})]),(0,a.bF)(o)])}const Ce={name:"AdminDashboard"},xe=(0,p.A)(Ce,[["render",be]]),_e=xe;var Pe={class:"user-management"},Ee=["onClick"],Xe=["onClick"];function Ie(e,n,t,r,u,s){return(0,a.uX)(),(0,a.CE)("div",Pe,[n[1]||(n[1]=(0,a.Lk)("h3",null,"使用者管理",-1)),(0,a.Lk)("table",null,[n[0]||(n[0]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"電子郵件"),(0,a.Lk)("th",null,"角色"),(0,a.Lk)("th",null,"操作")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.users,(function(e){return(0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,y.v_)(e.id),1),(0,a.Lk)("td",null,(0,y.v_)(e.email),1),(0,a.Lk)("td",null,(0,y.v_)(e.isAdmin?"管理員":"一般用戶"),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:function(n){return r.editUser(e)}},"編輯",8,Ee),(0,a.Lk)("button",{onClick:function(n){return r.deleteUser(e.id)}},"刪除",8,Xe)])])})),128))])])])}t(2008);const Se={name:"UserManagement",setup:function(){var e=(0,X.KR)([]);(0,a.sV)((0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ee.getUsers();case 2:e.value=n.sent;case 3:case"end":return n.stop()}}),n)}))));var n=function(e){console.log("編輯用戶",e)},t=function(){var n=(0,E.A)((0,P.A)().mark((function n(t){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!confirm("確定要刪除此用戶嗎？")){n.next=4;break}return n.next=3,ee.deleteUser(t);case 3:e.value=e.value.filter((function(e){return e.id!==t}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{users:e,editUser:n,deleteUser:t}}},Ue=(0,p.A)(Se,[["render",Ie]]),We=Ue;var Fe={class:"lantern-management"},Ke={key:0},Re=["onClick"],Ve=["onClick"];function qe(e,n,t,u,s,i){return(0,a.uX)(),(0,a.CE)("div",Fe,[n[8]||(n[8]=(0,a.Lk)("h3",null,"光明燈管理",-1)),(0,a.Lk)("button",{onClick:n[0]||(n[0]=function(e){return u.showAddForm=!0})},"新增光明燈"),u.showAddForm?((0,a.uX)(),(0,a.CE)("div",Ke,[n[6]||(n[6]=(0,a.Lk)("h4",null,"新增光明燈",-1)),(0,a.Lk)("form",{onSubmit:n[4]||(n[4]=(0,r.D$)((function(){return u.addLantern&&u.addLantern.apply(u,arguments)}),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[1]||(n[1]=function(e){return u.newLantern.name=e}),placeholder:"名稱",required:""},null,512),[[r.Jo,u.newLantern.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return u.newLantern.description=e}),placeholder:"描述",required:""},null,512),[[r.Jo,u.newLantern.description]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[3]||(n[3]=function(e){return u.newLantern.price=e}),type:"number",placeholder:"價格",required:""},null,512),[[r.Jo,u.newLantern.price,void 0,{number:!0}]]),n[5]||(n[5]=(0,a.Lk)("button",{type:"submit"},"新增",-1))],32)])):(0,a.Q3)("",!0),(0,a.Lk)("table",null,[n[7]||(n[7]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"名稱"),(0,a.Lk)("th",null,"描述"),(0,a.Lk)("th",null,"價格"),(0,a.Lk)("th",null,"操作")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.lanterns,(function(e){return(0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,y.v_)(e.id),1),(0,a.Lk)("td",null,(0,y.v_)(e.name),1),(0,a.Lk)("td",null,(0,y.v_)(e.description),1),(0,a.Lk)("td",null,"$"+(0,y.v_)(e.price),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:function(n){return u.editLantern(e)}},"編輯",8,Re),(0,a.Lk)("button",{onClick:function(n){return u.deleteLantern(e.id)}},"刪除",8,Ve)])])})),128))])])])}const je={name:"LanternManagement",setup:function(){var e=(0,X.KR)([]),n=(0,X.KR)(!1),t=(0,X.KR)({name:"",description:"",price:0});(0,a.sV)((0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Z.getLanterns();case 2:e.value=n.sent;case 3:case"end":return n.stop()}}),n)}))));var r=function(){var r=(0,E.A)((0,P.A)().mark((function r(){var a;return(0,P.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Z.createLantern(t.value);case 2:a=r.sent,e.value.push(a),t.value={name:"",description:"",price:0},n.value=!1;case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),u=function(e){console.log("編輯光明燈",e)},s=function(){var n=(0,E.A)((0,P.A)().mark((function n(t){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!confirm("確定要刪除此光明燈嗎？")){n.next=4;break}return n.next=3,Z.deleteLantern(t);case 3:e.value=e.value.filter((function(e){return e.id!==t}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{lanterns:e,showAddForm:n,newLantern:t,addLantern:r,editLantern:u,deleteLantern:s}}},De=(0,p.A)(je,[["render",qe]]),Je=De;var Oe={class:"prayer-management"},Me=["onClick"],$e=["onClick"];function Ne(e,n,t,r,u,s){return(0,a.uX)(),(0,a.CE)("div",Oe,[n[1]||(n[1]=(0,a.Lk)("h3",null,"祈福留言管理",-1)),(0,a.Lk)("table",null,[n[0]||(n[0]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"用戶"),(0,a.Lk)("th",null,"光明燈"),(0,a.Lk)("th",null,"留言"),(0,a.Lk)("th",null,"狀態"),(0,a.Lk)("th",null,"操作")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.prayers,(function(e){return(0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,y.v_)(e.id),1),(0,a.Lk)("td",null,(0,y.v_)(e.user),1),(0,a.Lk)("td",null,(0,y.v_)(e.lantern),1),(0,a.Lk)("td",null,(0,y.v_)(e.message),1),(0,a.Lk)("td",null,(0,y.v_)(e.status),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:function(n){return r.approvePrayer(e.id)}},"批准",8,Me),(0,a.Lk)("button",{onClick:function(n){return r.rejectPrayer(e.id)}},"拒絕",8,$e)])])})),128))])])])}t(2062);const Be={name:"PrayerManagement",setup:function(){var e=(0,X.KR)([]);(0,a.sV)((0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ae.getPrayers();case 2:e.value=n.sent;case 3:case"end":return n.stop()}}),n)}))));var n=function(){var n=(0,E.A)((0,P.A)().mark((function n(t){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ae.updatePrayerStatus(t,"approved");case 2:e.value=e.value.map((function(e){return e.id===t?(0,H.A)((0,H.A)({},e),{},{status:"approved"}):e}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),t=function(){var n=(0,E.A)((0,P.A)().mark((function n(t){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ae.updatePrayerStatus(t,"rejected");case 2:e.value=e.value.map((function(e){return e.id===t?(0,H.A)((0,H.A)({},e),{},{status:"rejected"}):e}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{prayers:e,approvePrayer:n,rejectPrayer:t}}},Qe=(0,p.A)(Be,[["render",Ne]]),He=Qe;var Te={class:"system-settings"};function ze(e,n,t,u,s,i){return(0,a.uX)(),(0,a.CE)("div",Te,[n[8]||(n[8]=(0,a.Lk)("h3",null,"系統設置",-1)),(0,a.Lk)("form",{onSubmit:n[3]||(n[3]=(0,r.D$)((function(){return u.saveSettings&&u.saveSettings.apply(u,arguments)}),["prevent"]))},[(0,a.Lk)("div",null,[n[4]||(n[4]=(0,a.Lk)("label",{for:"siteName"},"網站名稱：",-1)),(0,a.bo)((0,a.Lk)("input",{id:"siteName","onUpdate:modelValue":n[0]||(n[0]=function(e){return u.settings.siteName=e}),type:"text"},null,512),[[r.Jo,u.settings.siteName]])]),(0,a.Lk)("div",null,[n[5]||(n[5]=(0,a.Lk)("label",{for:"maxLanterns"},"最大光明燈數量：",-1)),(0,a.bo)((0,a.Lk)("input",{id:"maxLanterns","onUpdate:modelValue":n[1]||(n[1]=function(e){return u.settings.maxLanterns=e}),type:"number"},null,512),[[r.Jo,u.settings.maxLanterns,void 0,{number:!0}]])]),(0,a.Lk)("div",null,[n[6]||(n[6]=(0,a.Lk)("label",{for:"prayerApprovalRequired"},"祈福留言需要審核：",-1)),(0,a.bo)((0,a.Lk)("input",{id:"prayerApprovalRequired","onUpdate:modelValue":n[2]||(n[2]=function(e){return u.settings.prayerApprovalRequired=e}),type:"checkbox"},null,512),[[r.lH,u.settings.prayerApprovalRequired]])]),n[7]||(n[7]=(0,a.Lk)("button",{type:"submit"},"保存設置",-1))],32)])}const Ge={name:"SystemSettings",setup:function(){var e=(0,X.KR)({siteName:"",maxLanterns:0,prayerApprovalRequired:!1});(0,a.sV)((0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ue.getSettings();case 2:e.value=n.sent;case 3:case"end":return n.stop()}}),n)}))));var n=function(){var n=(0,E.A)((0,P.A)().mark((function n(){return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ue.updateSettings(e.value);case 2:alert("設置已保存");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{settings:e,saveSettings:n}}},Ye=(0,p.A)(Ge,[["render",ze]]),Ze=Ye;var en={key:0,class:"lantern-detail"},nn={key:0,class:"lit-lanterns"},tn={key:1},rn={key:1};function an(e,n,t,r,u,s){return r.lantern?((0,a.uX)(),(0,a.CE)("div",en,[(0,a.Lk)("h2",null,(0,y.v_)(r.lantern.name)+" 詳細狀態",1),(0,a.Lk)("p",null,"總數: "+(0,y.v_)(r.lantern.totalCount),1),(0,a.Lk)("p",null,"已點亮: "+(0,y.v_)(r.lantern.litCount),1),(0,a.Lk)("p",null,"剩餘: "+(0,y.v_)(r.lantern.totalCount-r.lantern.litCount),1),n[2]||(n[2]=(0,a.Lk)("h3",null,"已點亮的燈",-1)),r.lantern.litBy.length?((0,a.uX)(),(0,a.CE)("div",nn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.lantern.litBy,(function(e,t){return(0,a.uX)(),(0,a.CE)("div",{key:t,class:"lit-lantern"},[(0,a.Lk)("p",null,[n[0]||(n[0]=(0,a.Lk)("strong",null,"點燈者:",-1)),(0,a.eW)(" "+(0,y.v_)(e.name),1)]),(0,a.Lk)("p",null,[n[1]||(n[1]=(0,a.Lk)("strong",null,"祈福留言:",-1)),(0,a.eW)(" "+(0,y.v_)(e.message),1)])])})),128))])):((0,a.uX)(),(0,a.CE)("p",tn,"目前還沒有人點亮這種燈。"))])):((0,a.uX)(),(0,a.CE)("p",rn,"加載中..."))}t(8940);const un={setup:function(){var e=(0,c.lq)(),n=(0,X.KR)(null);return(0,a.sV)((0,E.A)((0,P.A)().mark((function t(){var r;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=parseInt(e.params.id),t.next=4,Z.getLanternDetailById(r);case 4:n.value=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("獲取光明燈詳��失敗",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))),{lantern:n}}},sn=(0,p.A)(un,[["render",an],["__scopeId","data-v-d1b307c2"]]),on=sn;var ln={class:"user-profile"},cn={key:0},dn={key:0,class:"user-lanterns"},pn={key:1},mn={key:1};function vn(e,n,t,r,u,s){return(0,a.uX)(),(0,a.CE)("div",ln,[n[2]||(n[2]=(0,a.Lk)("h2",null,"會員資料",-1)),r.user?((0,a.uX)(),(0,a.CE)("div",cn,[(0,a.Lk)("p",null,[n[0]||(n[0]=(0,a.Lk)("strong",null,"電子郵件：",-1)),(0,a.eW)(" "+(0,y.v_)(r.user.email),1)]),n[1]||(n[1]=(0,a.Lk)("h3",null,"我的光明燈",-1)),r.userLanterns.length?((0,a.uX)(),(0,a.CE)("div",dn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.userLanterns,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"lantern-item"},[(0,a.Lk)("h4",null,(0,y.v_)(e.name),1),(0,a.Lk)("p",null,"點燈日期："+(0,y.v_)(e.date),1),(0,a.Lk)("p",null,"祈福留言："+(0,y.v_)(e.message),1)])})),128))])):((0,a.uX)(),(0,a.CE)("p",pn,"您還沒有點亮任何光明燈。"))])):((0,a.uX)(),(0,a.CE)("p",mn,"載入中..."))])}const fn={name:"UserProfile",setup:function(){var e=(0,l.Pj)(),n=(0,X.KR)(null),t=(0,X.KR)([]);return(0,a.sV)((0,E.A)((0,P.A)().mark((function r(){return(0,P.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.value=e.state.user,!n.value){r.next=5;break}return r.next=4,ee.getUserLanterns(n.value.id);case 4:t.value=r.sent;case 5:case"end":return r.stop()}}),r)})))),{user:n,userLanterns:t}}},kn=(0,p.A)(fn,[["render",vn],["__scopeId","data-v-1306576f"]]),Ln=kn;var hn=[{path:"/",name:"Home",component:g},{path:"/login",name:"Login",component:U},{path:"/register",name:"Register",component:V},{path:"/forgot-password",name:"ForgotPassword",component:O},{path:"/lanterns",name:"LanternList",component:oe},{path:"/lantern-status",name:"LanternStatus",component:fe},{path:"/lantern-detail/:id",name:"LanternDetail",component:on},{path:"/checkout",name:"Checkout",component:Ae},{path:"/admin",name:"AdminDashboard",component:_e,meta:{requiresAdmin:!0},children:[{path:"users",name:"UserManagement",component:We},{path:"lanterns",name:"LanternManagement",component:Je},{path:"prayers",name:"PrayerManagement",component:He},{path:"settings",name:"SystemSettings",component:Ze}]},{path:"/profile",name:"UserProfile",component:Ln,meta:{requiresAuth:!0}}],gn=(0,c.aE)({history:(0,c.Bt)(),routes:hn});gn.beforeEach((function(e,n,t){var r=!!localStorage.getItem("user");if(e.matched.some((function(e){return e.meta.requiresAuth})))r?t():t("/login");else if(e.matched.some((function(e){return e.meta.requiresAdmin}))){var a="true"===localStorage.getItem("isAdmin");a?t():t("/login")}else t()}));const yn=gn;t(739),t(3110),t(9432);const An=(0,l.y$)({state:{user:null},mutations:{setUser:function(e,n){e.user=n,n?(localStorage.setItem("user",JSON.stringify(n)),n.isAdmin?localStorage.setItem("isAdmin","true"):localStorage.removeItem("isAdmin")):(localStorage.removeItem("user"),localStorage.removeItem("isAdmin"))}},actions:{login:function(e,n){return(0,E.A)((0,P.A)().mark((function t(){var r,a;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,ee.login(n);case 4:return a=t.sent,r("setUser",a.user),t.abrupt("return",a.user);case 9:throw t.prev=9,t.t0=t["catch"](1),console.error("Login failed:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},register:function(e,n){return(0,E.A)((0,P.A)().mark((function t(){var r,a;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,ee.register(n);case 3:return a=t.sent,r("setUser",a.user),t.abrupt("return",a.user);case 6:case"end":return t.stop()}}),t)})))()},logout:function(e){var n=e.commit;n("setUser",null)},checkAuth:function(e){var n=e.commit,t=JSON.parse(localStorage.getItem("user"));t&&n("setUser",t)}},getters:{isAdmin:function(e){return e.user&&e.user.isAdmin},isLoggedIn:function(e){return!!e.user}}});var wn=(0,r.Ef)(v);wn.use(An),wn.use(yn),An.dispatch("checkAuth").then((function(){wn.mount("#app")}))}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var u=n[r]={exports:{}};return e[r].call(u.exports,u,u.exports,t),u.exports}t.m=e,(()=>{var e=[];t.O=(n,r,a,u)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,a,u]=e[c],i=!0,o=0;o<r.length;o++)(!1&u||s>=u)&&Object.keys(t.O).every((e=>t.O[e](r[o])))?r.splice(o--,1):(i=!1,u<s&&(s=u));if(i){e.splice(c--,1);var l=a();void 0!==l&&(n=l)}}return n}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[r,a,u]}})(),(()=>{t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{var e={524:0};t.O.j=n=>0===e[n];var n=(n,r)=>{var a,u,[s,i,o]=r,l=0;if(s.some((n=>0!==e[n]))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(o)var c=o(t)}for(n&&n(r);l<s.length;l++)u=s[l],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(c)},r=self["webpackChunkvirtual_illumination_lamp"]=self["webpackChunkvirtual_illumination_lamp"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})();var r=t.O(void 0,[504],(()=>t(1453)));r=t.O(r)})();
//# sourceMappingURL=app.a921640c.js.map